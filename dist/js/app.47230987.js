!function(t){function e(e){for(var i,o,r=e[0],h=e[1],d=e[2],c=0,p=[];c<r.length;c++)o=r[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);for(l&&l(e);p.length;)p.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,r=1;r<n.length;r++){var h=n[r];0!==a[h]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={0:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=a[t]=[e,i]}));e.push(n[2]=i);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(t){return o.p+"js/"+({}[t]||t)+"."+{2:"a3c9200f",3:"a954ca78",4:"77fa9f9c",5:"88ae26d5"}[t]+".chunk.js"}(t);var h=new Error;s=function(e){r.onerror=r.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",h.name="ChunkLoadError",h.type=i,h.request=s,n[1](h)}a[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(e)},o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="./",o.oe=function(t){throw console.error(t),t};var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var l=h;s.push([15,1]),n()}([function(t,e,n){"use strict";class i extends HTMLElement{constructor(){super(),this._cache={events:{}}}$(t){return this.querySelector(t)}$$(t){return this.querySelectorAll(t)}emmit(t,e,n=!0){const i=JSON.stringify(arguments);if(!(i in this._cache.events)){const a={bubbles:n};e instanceof Object&&(a.detail=e),this._cache.events[i]=new CustomEvent(t,a)}this.dispatchEvent(this._cache.events[i])}getTemplateCopy(t=this.template){if(this.template)throw new Error("No have temptale");return t.content.cloneNode(!0)}makeShadow(t){this.attachShadow({mode:"open"});const e=this.getTemplateCopy(t);this.shadow=this.shadowRoot,this.shadow.appendChild(e),this.shadow.$=t=>this.shadow.querySelector(t),this.shadow.$$=t=>new CustomNodeList(this.shadow.querySelectorAll(t))}}var a=i;n.d(e,"a",(function(){return a}));const s=new class{emmit(t,e,n=document){const i=new CustomEvent(t,{detail:e});n.dispatchEvent(i)}on(t,e,n=document){if(!n)return!1;"function"===typeof e&&n.addEventListener(t,e)}off(t,e,n=document){if(!n)return!1;"function"===typeof e&&n.removeEventListener(t,e)}define(t,e,n={}){window.customElements.define(t,e,{})}whenDefined(t){return window.customElements.whenDefined(t)}};e.b=s},,,,,,function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=6},,,function(t,e){const n={data:{},chat_ids:[],loading:!1,requestParams:{}};t.exports=function(t=n,e){switch(e.type){case"chatList.setChatInfo":return{...t,data:{...t.data,...e.payload}};case"chatList.setChatIds":return{...t,chat_ids:e.payload.chat_ids};case"chatList.setRequestSettings":return{...t,requestParams:e.payload.params};default:return t}}},function(t,e){const n={data:{},currentChat:{},currentChatMessages:{},loading:!1,requestParams:{},activeChatId:null};t.exports=function(t=n,e){switch(e.type){case"chat.setChatInfo":return{...t,data:{...t.data,...e.payload}};case"chat.setChatHistoryToStore":return{...t,currentChatMessages:{...t.currentChatMessages,...e.payload.data},activeChatId:e.payload.chat_id};default:return t}}},function(t,e){const n={isUserAuth:!1,authWaitPhoneNumber:!1,authWaitCode:!1,authWaitPassword:!1,authHasErrors:!1,temporaryPhone:"Phone number"};t.exports=function(t=n,e){switch(e.type){case"auth.authorizationStateReady":return{...t,isUserAuth:!0,authHasErrors:!1};case"auth.authorizationStateWaitPhoneNumber":return{...t,authWaitPhoneNumber:!0};case"auth.authorizationStateClosed":return{...t,isUserAuth:!1,authHasErrors:!0};case"auth.authorizationStateWaitCode":return{...t,authWaitCode:!0};case"auth.authorizationStateWaitPassword":return{...t,authWaitPassword:!0};case"auth.setTemploaryPhone":return{...t,temporaryPhone:e.payload};default:return t}}},function(t,e){const n={};t.exports=function(t=n,e){switch(e.type){case"option.updateOption":return{...t,[e.payload.name]:e.payload.value};default:return t}}},function(t,e){const n=document.createElement("template");n.innerHTML="\n    <style>\n    :host {\n      position: relative;\n    }\n\n    app-loader{\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n    </style>\n    <div></div>\n",window.customElements.define("app-chat-right-sidebar",class extends HTMLElement{constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(n.content.cloneNode(!0))}})},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(5);const i=document.createElement("template");i.innerHTML='\n<style>\n  :host {\n      display: inline-block;\n      font-family: sans-serif;\n\n      --focus-color: #4da3f6;\n      --focus-error-color: #e54035;\n    }\n  * {\n    box-sizing: border-box;\n  }\n\n  .input-wrap{\n    position: relative;\n  }\n\n  input {\n    box-sizing: border-box;\n    display: inline-block;\n    width: 100%;\n    padding: 17px 18px;\n    border: 1px solid #e6e7ea;\n    border-radius: 10px;\n    outline: none !important;\n    font-size: 16px;\n    caret-color: var(--focus-color);\n  }\n\n  input[data-has-mask]{\n    letter-spacing: 1px;\n  }\n\n  input.has-error{\n    border-color: var(--focus-error-color);\n    caret-color: var(--focus-error-color);\n  }\n\n  input.has-error:focus {\n    border: 1px solid var(--focus-error-color);\n    box-shadow: 0 0 0 1px var(--focus-error-color);\n  }\n\n  input:focus {\n    border: 1px solid var(--focus-color);\n    box-shadow: 0 0 0 1px var(--focus-color);\n  }\n  \n  label {\n    position:absolute;\n    top: 50%;\n    left: 20px;\n    transform: translateY(-50%);\n    transition: all 0.1s ease-out; \n    color: #b0b9c0;\n    background-color:#fff;\n  }\n\n  input.with-value + label {\n    font-size: 12px;\n    top: 0px;\n    transform: translateY(-50%);\n    padding: 0 5px;\n    color: var(--focus-color);\n  }\n  button{\n    position:absolute;\n    top: 50%;\n    right: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transform: translateY(-50%);\n    background: transparent;\n    border: none;\n    font-size:23px;\n    outline: none;  \n  }\n  input.with-value.has-error + label {\n    color: var(--focus-error-color);\n  }\n</style>\n<div class="input-wrap">\n  <input type="text" id="my-input"/>\n  <label for="my-input"></label>\n</div>\n';class a extends HTMLElement{constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(i.content.cloneNode(!0)),this.$input=this._shadowRoot.querySelector("input"),this.$label=this._shadowRoot.querySelector("label"),this.$inputWrap=this._shadowRoot.querySelector(".input-wrap"),this.customAttr=["label"],this.value=this.hasAttribute("value")?this.getAttribute("value"):"",this.value&&this.$input.classList.add("with-value"),this.hasAttribute("label")&&(this.$label.innerHTML=this.getAttribute("label")),this.hasAttribute("data-has-mask")&&n.e(2).then(n.t.bind(null,22,7)).then(({default:t})=>{t({numericInput:!0,greedy:!1,mask:"+9{*}"}).mask(this.$input)}),this.setErrorState()}static get observedAttributes(){return["has-error"]}attributeChangedCallback(t,e,n){"has-error"===t&&!0===n&&this.setErrorState(),"has-error"===t&&!1===n&&this.resetErrorState()}connectedCallback(){const t=Object.values(this.attributes);t.length&&t.forEach(t=>{this.customAttr.includes(t.name)||this.$input.setAttribute(t.name,t.value)}),"password"===this.getAttribute("type")&&this.typePasswordRendered(),this.$input.addEventListener("click",this.clickHandler.bind(this)),this.$input.addEventListener("keyup",this.keyupHandler.bind(this)),this.$input.addEventListener("change",this.changeHandler.bind(this)),this.hasAttribute("data-error-event")&&document.addEventListener(this.getAttribute("data-error-event"),this.customErrorHandle.bind(this)),this.extendConnectedCallback()}disconnectedCallback(){this.$input.removeEventListener("click",this.clickHandler.bind(this)),this.$input.removeEventListener("keyup",this.keyupHandler.bind(this)),this.$input.removeEventListener("change",this.changeHandler.bind(this)),this.hasAttribute("data-error-event")&&document.removeEventListener(this.getAttribute("data-error-event"),this.customErrorHandle.bind(this))}extendConnectedCallback(){}extendDisconnectedCallback(){}customErrorHandle(t){const{detail:{message:e}}=t;this.setAttribute("has-error",!0),this.setAttribute("error-message",e),this.setErrorState()}typePasswordRendered(){const t=document.createElement("button");this.icon=document.createElement("app-icon"),this.icon.setAttribute("icon","eye1_svg"),t.appendChild(this.icon),t.addEventListener("click",this.togglePasswordType.bind(this)),this.$inputWrap.appendChild(t)}keyupHandler(t){t.target.value?this.$input.classList.add("with-value"):(this.$input.classList.remove("with-value"),this.resetErrorState())}clickHandler(t){const e=new CustomEvent("click",{detail:{value:t.target.value,target:t.target}});this.dispatchEvent(e)}changeHandler(t){const e=new CustomEvent("change",{detail:{value:t.target.value,target:t.target}});this.dispatchEvent(e)}togglePasswordType(t){const e="password"===this.$input.getAttribute("type");e?(this.$input.setAttribute("type","text"),this.icon.setAttribute("icon","eye2_svg")):(this.$input.setAttribute("type","password"),this.icon.setAttribute("icon","eye1_svg"));const n=new CustomEvent("toggle-password",{detail:{isPasswordShow:e}});this.dispatchEvent(n)}setErrorState(){this.hasAttribute("has-error")&&(this.$input.classList.add("has-error"),this.hasAttribute("error-message")&&(this.$label.innerHTML=this.getAttribute("error-message")))}resetErrorState(){this.$input.classList.remove("has-error"),this.$label.innerHTML=this.getAttribute("label")}}window.customElements.define("app-input",a);const s={core:{loading:"Please Wait..."},auth:{sign_in:"Sign in to Telegram",sign_in_desc:"Please confirm your country and enter your phone number.",country:"Country",phone:"Phone Number",phone_submit:"NEXT",code:"Code",code_desc:"We have send you an SMS with the code.",password_header:"Enter a Password",password_desc:"You account is protected with an additional password",password:"Password",registration_name:"Your name",registration_desc:"Enter yout name and add a profile picture",name:"Name",last_name:"Last name (optional)",start_messanging:"Start messanging",checkbox_label:"Keep me signed in",cropp_title:"Drag to Reposition"}};var o=function(t){if(s[t])return s[t];throw new Error(`Not Have this namespace: ${t}`)},r=n(3),h=n.n(r);const d="b4b0d61282108a31908dd6b2dbd7067b.wasm",l="b4b0d61282108a31908dd6b2dbd7067b";function c(){let t="Unknown";return-1!==window.navigator.userAgent.indexOf("Windows NT 10.0")&&(t="Windows 10"),-1!==window.navigator.userAgent.indexOf("Windows NT 6.2")&&(t="Windows 8"),-1!==window.navigator.userAgent.indexOf("Windows NT 6.1")&&(t="Windows 7"),-1!==window.navigator.userAgent.indexOf("Windows NT 6.0")&&(t="Windows Vista"),-1!==window.navigator.userAgent.indexOf("Windows NT 5.1")&&(t="Windows XP"),-1!==window.navigator.userAgent.indexOf("Windows NT 5.0")&&(t="Windows 2000"),-1!==window.navigator.userAgent.indexOf("Mac")&&(t="Mac/iOS"),-1!==window.navigator.userAgent.indexOf("X11")&&(t="UNIX"),-1!==window.navigator.userAgent.indexOf("Linux")&&(t="Linux"),t}function p(){let t="",e=!!!document.documentMode&&!!window.StyleMedia;return t=-1===navigator.userAgent.indexOf("Chrome")||e?-1===navigator.userAgent.indexOf("Safari")||e?-1!==navigator.userAgent.indexOf("Firefox")?"Firefox":-1!==navigator.userAgent.indexOf("MSIE")||!0===!!document.documentMode?"IE":e?"Edge":"Unknown":"Safari":"Chrome"}function u(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function b(t,e,n){var i=(n=n||{}).expires;if("number"==typeof i&&i){var a=new Date;a.setTime(a.getTime()+1e3*i),i=n.expires=a}i&&i.toUTCString&&(n.expires=i.toUTCString());var s=t+"="+(e=encodeURIComponent(e));for(var o in n){s+="; "+o;var r=n[o];!0!==r&&(s+="="+r)}document.cookie=s}function m(t){b(t,null,{expires:-1})}var g={api_id:803162,api_hash:"f3c083405111ab89097427f9e33c78bc"};var f={"/":{component:"chat"},"#/auth":{component:"app-auth",storeAttr:["test"]},"#/code-confirm":{component:"app-auth-code-confirm"},"#/password":{component:"app-auth-password"},"#/chat":{component:"app-chat-container"},"#/registration":{component:"app-registration"}};var w=class{constructor(t,e,n){this.$root=t,this.routes=e,this.defaultRoute="/",this.store=n,this.detachedRoutes={}}render(t=this.defaultRoute){const e=this.routes[t]?this.routes[t]:this.routes[this.defaultRoute];this.$root.firstChild&&(this.$root.firstChild.remove(),this.$root.innerHTML=`<${e.component}></${e.component}>`)}init(){window.addEventListener("popstate",()=>{const t=window.location.hash;this.render(t)}),this.render()}};function y(t){history.pushState([...history.state||[],t],"",t),window.dispatchEvent(new Event("popstate"))}var v=n(0),x=n(1);var $=Object(x.c)({chatList:n(9),chat:n(10),userInfo:n(11),options:n(12),lastAction:function(t=null,e){return e}});var k=[t=>e=>n=>{try{return e(n)}catch(e){throw console.error("Caught an exception!",e),Raven.captureException(e,{extra:{action:n,state:t.getState()}}),e}},t=>t=>{const e=[];let n=null;function i(){n=null;try{e.length&&t(e.shift())}finally{a()}}function a(){e.length&&!n&&(n=requestAnimationFrame(i))}return n=>n.meta&&n.meta.raf?(e.push(n),a(),function(){e=e.filter(t=>t!==n)}):t(n)},t=>t=>e=>{if(!e.meta||!e.meta.delay)return t(e);const n=setTimeout(()=>t(e),e.meta.delay);return function(){clearTimeout(n)}},t=>e=>n=>"function"!==typeof n.then?e(n):Promise.resolve(n).then(t.dispatch),t=>t=>e=>{if(!e.promise)return t(e);function n(t,n){const i=Object.assign({},e,{ready:t},n);return delete i.promise,i}return t(n(!1)),e.promise.then(e=>t(n(!0,{result:e})),e=>t(n(!0,{error:e})))},t=>e=>n=>{if(n.type){const e=new CustomEvent(n.type,{detail:{store:t.getState(),action:n}});document.dispatchEvent(e)}return e(n)}];const C=Object(x.d)($,{},Object(x.a)(...k)),{dispatch:_,subscribe:H}=C;var S=C;const L=Object(x.b)(()=>({type:"auth.authorizationStateReady"}),_),A=Object(x.b)(()=>({type:"auth.authorizationStateWaitPhoneNumber"}),_),E=Object(x.b)(()=>({type:"auth.authorizationStateClosed"}),_),T=Object(x.b)(()=>({type:"auth.authorizationStateWaitCode"}),_),P=Object(x.b)(()=>({type:"auth.authorizationStateWaitPassword"}),_),M=Object(x.b)(t=>({type:"auth.setTemploaryPhone",payload:t}),_),D=Object(x.b)((t,e)=>({type:"option.updateOption",payload:{name:t,value:e}}),_);var O=function(t){if("updateOption"===t["@type"]){const{name:e,value:n}=t;D(e,n)}switch("updateFile"===t["@type"]&&v.b.emmit("file.updateFile",t),t["@type"]){case"updateAuthorizationState":switch(t.authorization_state["@type"]){case"authorizationStateReady":L(),y("#/chat");break;case"authorizationStateWaitPhoneNumber":A(),m("keepMeAuth"),y("#/auth");break;case"authorizationStateClosed":E(),y("#/auth");break;case"authorizationStateWaitCode":T(),M(t.authorization_state.code_info.phone_number),y("#/code-confirm");break;case"authorizationStateWaitPassword":P(),y("#/password");break;case"authorizationStateWaitRegistration":y("#/registration")}}};var F=function(t){switch(t.message){case"PHONE_NUMBER_INVALID":v.b.emmit("phone_invalid",{message:"Invalid phone"});break;case"PHONE_CODE_EMPTY":case"PHONE_CODE_INVALID":v.b.emmit("phone_code_invalid",{message:"Invalid phone code"});break;case"PASSWORD_HASH_INVALID":v.b.emmit("password_invalid",{message:"Invalid password"});break;case"First name can't be empty":v.b.emmit("emty_first_name",{message:"First name can't be empty"})}};var R=function(t){[O,F].forEach(e=>{e(t)})};var z=new class{constructor(){this.parameters={useTestDC:!1,readOnly:!1,verbosity:1,jsVerbosity:3,fastUpdating:!0,useDatabase:!1,mode:"wasm"},this.disableLog=!1,this.client=null,this.debug=!1}init(){const{verbosity:t,jsVerbosity:e,useTestDC:n,readOnly:i,fastUpdating:a,useDatabase:s,mode:o}=this.parameters;let r={logVerbosityLevel:t,jsLogVerbosityLevel:e,mode:o,prefix:n?"tdlib_test":"tdlib",readOnly:i,isBackground:!1,useDatabase:s,wasmUrl:`${d}?_sw-precache=${l}`};this.client=new h.a(r),this.client.onUpdate=t=>{R(t)}}send(t){return this.disableLog?this.client.send(t):this.client.send(t).then(t=>t).catch(t=>{throw"error"===t["@type"]&&(this.debug&&console.error(t.message),R(t)),t})}sendTdParameters(){const{api_id:t,api_hash:e}=g,{useTestDC:n}=this.parameters;this.send({"@type":"setTdlibParameters",parameters:{"@type":"tdParameters",use_test_dc:n,api_id:t,api_hash:e,system_language_code:navigator.language||"en",device_model:p(),system_version:c(),application_version:"1.0.0",use_secret_chats:!1,use_message_database:!0,use_file_database:!1,database_directory:"/db",files_directory:"/"}})}};o("core");const N=document.createElement("template");N.innerHTML="\n<style>\n  :host {\n    display: inline-flex;\n  }\n  span {\n    display: inline-block;\n    pointer-events: none;\n    width: 23px;\n    height: 23px;\n    border: 2px solid transparent;\n    border-color: #eee;\n    border-top-color: transparent;\n    border-radius: 50%;\n    animation: loadingspin 1s linear infinite;\n  }\n\n  span.big{\n    width: 40px;\n    height: 40px;\n    border-color: #4da3f6;\n    border-top-color: transparent;\n    border-width: 3px;\n  }\n\n  @keyframes loadingspin {\n    100% {\n        transform: rotate(360deg)\n    }\n  }\n</style>\n<span></span>\n",v.b.define("app-loader",class extends v.a{constructor(){super(),this.makeShadow(N),this.$span=this.shadow.$("span"),this.hasAttribute("big")&&this.$span.classList.add("big")}});const I=o("core"),W=document.createElement("template");W.innerHTML="\n<style>\n  :host {\n      display: inline-block;\n    }\n    \n  button {\n    overflow: hidden;\n    position: relative;\n    display: inline-block;\n    box-sizing: border-box;\n    padding: 18px;\n    width: 100%;\n    border: none;\n    border-radius: 10px;\n    text-transform: uppercase;\n    background-color: #4da3f6;\n    color: #fff;\n    outline: none;\n    font-weight: 700;\n    cursor: pointer;\n    transition:background-color 0.2s ease-out;\n    \n  }\n\n  .ripple{\n    z-index: 1;\n    position: absolute;\n    background-color: #408acf;\n    border-radius: 50%;\n    width: 25px;\n    height: 25px;\n    transition: transform 0.3s ease-out;\n  }\n\n  .ripple.run{\n    transform: scale(30);\n  }\n\n  button:hover{\n    background-color: #4696e1;\n  }\n\n  span{\n    z-index: 2;\n    position: relative;\n  }\n\n  app-loader{\n    z-index: 2;\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    transform: translateY(-50%);\n  }\n</style>\n<button><span><slot></slot></span></button>\n",window.customElements.define("app-button",class extends HTMLElement{constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(W.content.cloneNode(!0)),this.$button=this._shadowRoot.querySelector("button"),this.$span=this._shadowRoot.querySelector("span"),this.$button.addEventListener("click",t=>this.drawRipple(t.offsetX,t.offsetY))}connectedCallback(){this.hasAttribute("is-loading")&&this.loadingAttrRenderer()}static get observedAttributes(){return["is-loading"]}attributeChangedCallback(t,e,n){"is-loading"!==t||this.hasAttribute("is-loading")||this.removeLoadingAttrTemplate()}removeLoadingAttrTemplate(){this.$loadingNode.remove(),this.$button.appendChild(this.$detachContent),this.$loader.remove()}loadingAttrRenderer(){this.$detachContent=this.$span.cloneNode(!0),this.$span.remove(),this.$loadingNode=document.createElement("span"),this.$loader=document.createElement("app-loader"),this.$loadingNode.innerHTML=I.loading,this.$button.appendChild(this.$loadingNode),this.$button.appendChild(this.$loader)}drawRipple(t,e){let n=document.createElement("div");n.classList.add("ripple"),this.$button.prepend(n),n.style.top=`${e-n.clientHeight/2}px`,n.style.left=`${t-n.clientWidth/2}px`,n.classList.add("run"),n.addEventListener("transitionend",t=>n.remove())}});const j=document.createElement("template");j.innerHTML='\n<style>\n  :host {\n    display: inline-flex;\n  }\n\n  .icon{\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    stroke-width: 0;\n    stroke: currentColor;\n    fill: currentColor;\n  }\n</style>\n<svg class="icon "><use xlink:href="#icon_chevron_down"></use></svg>\n',v.b.define("app-icon",class extends v.a{constructor(){super(),this.makeShadow(j),this.$wrap=this.shadow.$("use")}connectedCallback(){this.$wrap.setAttribute("xlink:href",this.getIconPath(this.getAttribute("icon")))}static get observedAttributes(){return["icon"]}attributeChangedCallback(t,e,n){"icon"===t&&this.$wrap.setAttribute("xlink:href",this.getIconPath(n))}getIconPath(t){return`./public/images/symbol-defs.svg#icon-${t}`}});const K=document.createElement("template");K.innerHTML="\n<style>\n:host {\n position: relative;\n z-index: 10;\n}\n.wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  opacity: 0;\n  visibility: hidden;\n  transform: scale(1.1);\n  transition: visibility 0s linear .25s,opacity .25s 0s,transform .25s;\n  z-index: 1;\n}\n.visible {\n  opacity: 1;\n  visibility: visible;\n  transform: scale(1);\n  transition: visibility 0s linear 0s,opacity .25s 0s,transform .25s;\n}\n.modal {\n  font-size: 14px;\n  padding: 17px 25px;\n  background-color: #fff;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%,-50%);\n  border-radius: 10px;\n  max-width: 445px;\n}\n\n.title {\n  font-size: 18px;\n}\n.button-container {\n  text-align: right;\n}\n\n.cancel {\n  position: absolute;\n  top: 17px;\n  left: 19px;\n  background: none;\n  border: none;\n  color:white;\n  cursor: pointer;\n  font-size: 22px;\n  color: #707478;\n  outline: none;\n}\n\n.cancel:focus {\n  color: #000;\n}\n</style>\n<div class='wrapper'>\n  <div class='modal'>\n    <span class='title'></span>\n    <div class='content'>\n      <slot></slot>\n    </div>\n    <button class='cancel'><app-icon icon=\"close_svg\"></app-icon></button>\n  </div>\n</div>",v.b.define("app-modal",class extends v.a{constructor(){super()}connectedCallback(){this._render(),this._attachEventHandlers()}static get observedAttributes(){return["visible","title"]}attributeChangedCallback(t,e,n){"title"===t&&this.shadow&&(this.shadow.$(".title").textContent=n),"visible"===t&&this.shadow&&(null===n?(this.shadow.$(".wrapper").classList.remove("visible"),this.emmit("close")):(this.shadow.$(".wrapper").classList.add("visible"),this.emmit("open")))}get visible(){return this.hasAttribute("visible")}set visible(t){t?this.setAttribute("visible",""):this.removeAttribute("visible")}get title(){return this.getAttribute("title")}set title(t){this.setAttribute("title",t)}_render(){this.makeShadow(K),this.$wrapp=this.shadow.$(".wrapper"),this.visible?this.$wrapp.classList.add("visible"):this.$wrapp.classList.remove("visible")}_attachEventHandlers(){const t=this.shadow.$(".cancel");this.shadow.$(".ok");t.addEventListener("click",t=>{this.emmit("cancel"),this.removeAttribute("visible")})}});let U=null;const B=document.createElement("template");B.innerHTML='\n<style>\n  :host {\n    position: relative;\n  }\n  .trigger-btn {\n    cursor: pointer;\n  }\n\n  .drop-down-wrap {\n    position: absolute;\n    display: none;\n    width: 100%;\n    top: calc(100% + 10px);\n    left: 0;\n    background-color: white;\n    border-radius: 10px;\n    box-shadow: 0 0 10px #ccc; \n  }\n\n  .drop-down-wrap.active{\n    display: block;\n  }\n\n  app-icon{\n    color: #8c959b;\n    transition: all 0.1s ease-out;\n  }\n\n  input:focus ~ button app-icon {\n    transform: rotate(-180deg);\n    color: var(--focus-color);\n  }\n\n  .drop-down-wrap{\n    overflow-y: auto;\n    max-height: 290px;\n  }\n\n  .drop-down-wrap::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px transparent;\n    background-color: transparent;\n  }\n\n  .drop-down-wrap::-webkit-scrollbar {\n    width: 5px;\n    background-color: transparent;\n  }\n\n  .drop-down-wrap::-webkit-scrollbar-thumb {\n    background-color: #dadce0;\n    border-radius: 3px;\n  }\n\n  app-flag-item {\n    width: 23px;\n    display: block;\n    background-color: #b9bbbd;\n  }\n</style>\n<div class="drop-down-wrap"></div>\n';v.b.define("app-chat-country-phone-code",class extends a{constructor(){super(),this._shadowRoot.appendChild(B.content.cloneNode(!0)),this.$inputWrap.insertAdjacentHTML("beforeEnd",'\n  <button class="trigger-btn"><app-icon icon="down_svg"></app-icon></button>\n'),this.extendConnectedCallback=this.extendConnectedCallback.bind(this),this.toggle=this.toggle.bind(this),this.onSelect=this.onSelect.bind(this),this.onFocusout=this.onFocusout.bind(this),this.onTriggerClick=this.onTriggerClick.bind(this),this.isDropdownRendered=!1}extendConnectedCallback(){this.$triggerBtn=this._shadowRoot.querySelector(".trigger-btn"),this.$dropDownWrap=this._shadowRoot.querySelector(".drop-down-wrap"),v.b.on("click",this.onTriggerClick,this.$triggerBtn),v.b.on("focus",this.toggle,this.$input),v.b.on("focus",this.toggle,this.$input),v.b.on("keyup",this.onKeyup,this.$input),v.b.on("focusout",this.onFocusout,this.$input),v.b.on("focusout",this.onFocusout,this.$input)}extendDisconnectedCallback(){v.b.off("click",this.onTriggerClick,this.$triggerBtn),v.b.off("focus",this.toggle,this.$input),v.b.off("keyup",this.onKeyup,this.$input),v.b.off("focusout",this.onFocusout,this.$input),v.b.off("focusout",this.onFocusout,this.$input)}onTriggerClick(){this.$input.focus()}onKeyup(t){v.b.emmit("phone.dropdowKeyDown",t.target.value)}onFocusout(){setTimeout(()=>{this.$dropDownWrap.classList.remove("active")},200)}onSelect(t){this.$input.value=t.name,this.toggle(),this.keyupHandler({target:this.$input}),v.b.emmit("dropdown.change",t,this)}load(t=(()=>{})){n.e(5).then(n.bind(null,23)).then(({default:e})=>{U=e,t()}),n.e(4).then(n.bind(null,25)).then(({default:t})=>{window.customElements.get("app-flag-item")||window.customElements.define("app-flag-item",t)})}toggle(){this.$dropDownWrap.classList.contains("active")?this.$dropDownWrap.classList.remove("active"):(this.isDropdownRendered||this.renderDropdown(),this.$dropDownWrap.classList.add("active"))}renderDropdown(){this.load(()=>{if(!U.countries)return!1;const{countries:t}=U,e=document.createDocumentFragment();t.forEach(t=>{const n=document.createElement("app-chat-country-phone-code-item");n.data=t,n.onSelect=this.onSelect,e.appendChild(n)}),this.$dropDownWrap.appendChild(e),this.isDropdownRendered=!0})}});const q=document.createElement("template");q.innerHTML="\n<style>\n  * {\n    box-sizing: border-box;\n  }\n\n  div{\n    display: flex;\n    padding: 15px;\n    transition: all 0.1s ease-out;\n    cursor: pointer;\n  }\n\n  div.hidden{\n    display: none;\n  }\n\n  div:hover{\n    background-color: #f4f4f5;\n  }\n\n  .icon{\n    margin-right: 20px;\n  }\n  .name {\n    margin-right: auto;\n  }\n  .code {\n    color: #707478;\n  }\n</style>\n<div></div>\n",v.b.define("app-chat-country-phone-code-item",class extends v.a{constructor(){super(),this.makeShadow(q),this.$wrap=this.shadow.$("div"),this.dropdowKeyDownH=this.dropdowKeyDownH.bind(this),this.onClick=this.onClick.bind(this),this.onSelect=null,this._data}connectedCallback(){v.b.on("click",this.onClick,this.$wrap),v.b.on("phone.dropdowKeyDown",this.dropdowKeyDownH)}disconnectedCallback(){v.b.off("click",this.onClick,this.$wrap),v.b.off("phone.dropdowKeyDown",this.dropdowKeyDownH)}onClick(){if(!this.onSelect)return!1;this.onSelect(this._data)}dropdowKeyDownH({detail:t}){const e=this._data.name.toLowerCase(),n=t.toLowerCase();if(!n)return this.$wrap.classList.remove("hidden");e.includes(n)||this.$wrap.classList.add("hidden")}set data(t){this._data=t,this.renderItem()}renderItem(){this.$wrap.innerHTML=`\n        <app-flag-item class="icon" icon="${this._data.iso2}"></app-flag-item> \n        <span class="name">${this._data.name}</span>\n        <span class="code">+${this._data.dialCode}</span>\n      `}});let V=null;const Y=o("auth"),X=document.createElement("template");X.innerHTML=`\n<style>\n  \n.file-wrapper{\n  margin-top: 108px;\n  margin-bottom: 17px;\n}\n\n.file-wrapper .section{\n  max-width: 355px;\n}\n.file-wrapper .tc{\n  text-align: center;\n  margin: 0 auto;\n}\n\n.file-wrapper app-input[type="file"]{\n  display: none;\n}\n\n.file-wrapper .file-label{\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 160px;\n  width: 160px;\n  cursor: pointer;\n  background-color: var(--primary-color);\n  background-size: cover;\n  border-radius: 50%;\n  margin: 0 auto;\n}\n\n.file-label:before {\n  z-index: 1;\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  border-radius: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  display: none;\n}\n\n.file-label.with-cropp-image:before{\n  display: block;\n}\n\n.file-label:focus {\n  box-shadow: 0 0 2px var(--primary-color);\n  outline: none;\n}\n\n.file-wrapper .file-label app-icon{\n  z-index: 2;\n  position: relative;\n  color: var(--white);\n  font-size: 50px;\n}\n\n#image{\n  display: inline-block;\n  width: 100%;\n  max-width: 100%;\n}\n\n#result{\n  margin: 0 45px;\n  margin-bottom: 50px;\n}\n\n.ok {\n  position: absolute;\n  bottom: 16px;\n  right: 19px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  padding: 0;\n  width: 55px;\n  height: 55px;\n  border: none;\n  border-radius: 100%;\n  text-transform: uppercase;\n  background-color: var(--primary-color);\n  color: var(--white);\n  font-size: 25px;\n  outline: none;\n  font-weight: 700;\n  cursor: pointer;\n  transition:background-color 0.2s ease-out;\n}\n\n.ok:hover{\n  background-color: var(--primary-color-darker);\n}\n\nimg.with-cropped-image{\n  display: block\n}\n\nh2 {\n  margin-top: 0;\n  margin-bottom: 27px;\n  padding-left: 11px;\n  text-align: left;\n  font-size: 19px;\n}\n.cropper-view-box,\n.cropper-face {\n  border-radius: 50%;\n}\n\n#result .cropper-modal {\n  background-color: var(--white);\n  opacity: 0.8;\n}\n\n#result .cropper-view-box {\n  outline: none;\n}\n</style>\n<div class='file-wrapper'>\n  <div class='section tc'>\n    <app-input type="file"></app-input>\n    <div class='file-label'>\n      <app-icon icon='cameraadd_svg'></app-icon>\n    </div>\n  </div>\n\n  <app-modal>\n    <div id="result">\n      <h2>${Y.cropp_title}</h2>\n      <img id="image" src="" alt="Cropp Image">\n      <button class="ok">\n        <app-icon icon="check_svg"></app-icon>\n      </button>\n    </div>\n  </app-modal>\n</div>\n`,v.b.define("app-crop-modal",class extends v.a{constructor(){super(),this.makeShadow(X),this.$result=this.shadow.$("#result"),this.$image=this.shadow.$("#image"),this.$file=this.shadow.$('[type="file"]'),this.$fileLable=this.shadow.$(".file-label"),this.$modal=this.shadow.$("app-modal"),this.$submitBtn=this.shadow.$(".ok"),this.cropper=!1,this.fileChangeHandler=this.fileChangeHandler.bind(this),this.onModalOpen=this.onModalOpen.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onLableClick=this.onLableClick.bind(this)}connectedCallback(){v.b.on("change",this.fileChangeHandler,this.$file),v.b.on("open",this.onModalOpen,this.$modal),v.b.on("click",this.onSubmit,this.$submitBtn),v.b.on("click",this.onLableClick,this.$fileLable)}onLableClick(){this.$file.$input.click()}fileChangeHandler(t){const e=t.detail.target.files,n=t=>{this.$file.value="",this.$image.src=t,this.$modal.visible=!0};let i,a;e&&e.length>0&&(a=e[0],URL?n(URL.createObjectURL(a)):FileReader&&((i=new FileReader).onload=function(t){n(i.result)},i.readAsDataURL(a)))}loadCropper(t){if(V)return t(V);n.e(3).then(n.t.bind(null,24,7)).then(({default:e})=>t(V=e))}onModalOpen(){this.cropper&&this.cropper.destroy(),this.loadCropper(t=>{this.cropper=new t(this.$image,{aspectRatio:1,viewMode:1,movable:!1,zoomable:!1,rotatable:!1,scalable:!1,guides:!1,background:!1,highlight:!1,cropBoxResizable:!1,autoCropArea:.7,ready:()=>{this.croppable=!0}})}),(new CSSStyleSheet).replace('@import url("./public/vendor/cropper.min.css")').then(t=>{this.shadow.adoptedStyleSheets=[t]}).catch(t=>{console.error("Failed to load:",t)})}onSubmit(){if(!this.croppable)return;const t=function(t){const e=document.createElement("canvas"),n=e.getContext("2d"),i=t.width,a=t.height;return e.width=i,e.height=a,n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,i,a),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(i/2,a/2,Math.min(i,a)/2,0,2*Math.PI,!0),n.fill(),e}(this.cropper.getCroppedCanvas());this.dataURLImage=t.toDataURL(),t.toBlob(t=>{this.blopImage=t}),this.$fileLable.setAttribute("style",`background-image: url(${this.dataURLImage})`),this.$fileLable.classList.add("with-cropp-image"),this.$modal.visible=!1}});o("core");const G=document.createElement("template");G.innerHTML="\n<style>\n  .app-checkbox{\n    text-align: left;\n    margin-left : 20px;\n    margin-bottom: 35px;\n  }\n\n\n  .container {\n    display: inline-block;\n    position: relative;\n    cursor: pointer;\n    font-size: 16px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .container .label-text{\n    padding-left: 45px;\n  }\n\n  .container input {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: 0;\n    width: 0;\n  }\n\n  .checkmark {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 15px;\n    width: 15px;\n    background-color: #e6e7ea;\n    border-radius: 3px;\n    transition: all 0.2s ease-out;\n  }\n\n  .container:hover input ~ .checkmark {\n    background-color: #ccc;\n  }\n\n  .container input:checked ~ .checkmark {\n    background-color: #4ca3f6;\n  }\n\n  .checkmark:after {\n    content: \"\";\n    position: absolute;\n    display: none;\n  }\n\n\n  .container input:checked ~ .checkmark:after {\n    display: block;\n  }\n\n  .container .checkmark:after {\n    left: 5px;\n    top: 0px;\n    width: 3px;\n    height: 10px;\n    border: solid white;\n    border-width: 0 2px 2px 0;\n    -webkit-transform: rotate(45deg);\n    -ms-transform: rotate(45deg);\n    transform: rotate(45deg);\n  }\n</style>\n</style>\n  <div class='app-checkbox'>\n    <label class=\"container\">\n      <input type='checkbox' name='app-checkbox' />\n      <span class='checkmark'></span>\n    </label>\n  </div>\n",v.b.define("app-checkbox",class extends v.a{constructor(){super(),this.makeShadow(G),this.$wrapper=this.shadow.$(".app-checkbox"),this.$label=this.shadow.$("label"),this.$checkbox=this.shadow.$('[type="checkbox"]')}connectedCallback(){if(v.b.on("change",this.changeHandler.bind(this),this.$checkbox),this.hasAttribute("is-checked")){const t="false"!=this.getAttribute("is-checked");this.setAttributesForCheckox(t)}this.hasAttribute("label-text")&&this.setLabelText()}disconnectedCallback(){v.b.off("change",this.changeHandler.bind(this),this.$checkbox)}attributeChangedCallback(t,e,n){"is-checked"===t&&e!==n&&this.setAttributesForCheckox(n)}static get observedAttributes(){return["is-checked"]}setAttributesForCheckox(t){this.$checkbox.value=t}setLabelText(){const t=document.createElement("span");t.classList.add("label-text"),t.innerHTML=this.getAttribute("label-text"),this.$label.appendChild(t)}changeHandler(t){const e=new CustomEvent("change",{detail:{value:t.target.checked,target:t.target}});this.dispatchEvent(e)}});o("auth");const J=document.createElement("template");J.innerHTML="\n<style>\n  :host {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n  }\n\n  .section{\n    max-width: 355px;\n  }\n\n  .tc {\n    text-align: center;\n  }\n\n  .main-logo{\n    width: 160px;\n    height: 160px;\n    margin-top: 108px;\n    margin-bottom: 17px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  h2 {\n    margin-bottom: 17px;\n    font-size: 30px;\n    user-select: none;\n  }\n\n  p {\n    margin-bottom: 50px;\n    padding: 0 55px;\n    color: #b9bbbd;\n    font-size: 15px;\n    line-height: 20px;\n    user-select: none;\n  }\n\n  app-input, button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n</style>\n<section class=\"section tc\">\n  <div class='heading-wrapper'>\n    <h2></h2>\n  </div>\n  <p></p>\n  <div>\n    <slot></slot>\n  </div>\n</section>\n",v.b.define("app-auth-section",class extends v.a{constructor(){if(super(),this.makeShadow(J),this.$heading=this.shadow.$("h2"),this.$section=this.shadow.$("section"),this.$desc=this.shadow.$("p"),this.isAminatedSticker=!1,this.hasAttribute("heading")&&(this.$heading.innerHTML=this.getAttribute("heading")),this.hasAttribute("desc")&&(this.$desc.innerHTML=this.getAttribute("desc")),this.hasAttribute("img-src")){const t=this.getAttribute("img-src");this.isAminatedSticker=-1!==t.indexOf(".tgs"),this.$section.insertAdjacentHTML("afterbegin",this.getImageTemplate(t))}this.player=this.shadow.$("tgs-player")}getImageTemplate(t){return this.isAminatedSticker?`\n        <tgs-player\n          width="160" height="160"\n          class="main-logo"\n          autoplay\n          mode="bounce"\n          direction='2'\n          src="${t}"\n        >\n        </tgs-player>\n      `:`<div class='img-wrapper'><img src="${t}" alt="image" width="160" height="160" class="main-logo"/></div>`}attributeChangedCallback(t,e,n){"heading"==t&&e!==n&&(this.$heading.innerHTML=n)}static get observedAttributes(){return["heading"]}connectedCallback(){this.isAminatedSticker&&(this.player=this.shadow.$("tgs-player"))}});const Q=o("auth"),Z=document.createElement("template");Z.innerHTML=`\n<style>\n  app-input, app-button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n\n  .registration-wrapper{\n    height : 100%;\n  }\n\n  .file-wrapper{\n    margin-top: 108px;\n    margin-bottom: 17px;\n  }\n\n  .file-wrapper .section{\n    max-width: 355px;\n  }\n  .file-wrapper .tc{\n    text-align: center;\n    margin: 0 auto;\n  }\n\n  .file-wrapper app-input[type="file"]{\n    display: none;\n  }\n\n  .file-wrapper .file-label{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 160px;\n    width: 160px;\n    background-color: #4da3f6;\n    border-radius: 50%;\n    margin: 0 auto;\n  }\n\n  .file-wrapper .file-label app-icon{\n    color: #fff;\n    font-size: 50px;\n  }\n</style>\n<div class='registration-wrapper'>\n  <app-crop-modal></app-crop-modal>\n  <app-auth-section heading="${Q.registration_name}" desc="${Q.registration_desc}">\n    <app-input data-error-event='emty_first_name' type="text" class='set-profile-name' label="${Q.name}"></app-input>\n    <app-input type="text" class='set-profile-lastname' label="${Q.last_name}"></app-input>         \n    <app-button class='set-profile-submit'>${Q.start_messanging.toUpperCase()}</app-button>\n  </app-auth-section>\n</div>\n`,v.b.define("app-registration",class extends v.a{constructor(){super(),this.makeShadow(Z),this.$name_input=this.shadow.$(".set-profile-name"),this.$lastname_input=this.shadow.$(".set-profile-lastname"),this.$button=this.shadow.$(".set-profile-submit"),this.$file_label=this.shadow.$(".file-label"),this.$file=this.shadow.$("app-crop-modal"),this.name=null,this.lastName=null,this.onChangeName=this.onChangeName.bind(this),this.onKeyDownHandle=this.onKeyDownHandle.bind(this),this.onChangeLastName=this.onChangeLastName.bind(this),this.onKeyDownHandle=this.onKeyDownHandle.bind(this),this.onSubmitHandle=this.onSubmitHandle.bind(this),this.onClickLabelFile=this.onClickLabelFile.bind(this)}connectedCallback(){v.b.on("change",this.onChangeName,this.$name_input),v.b.on("keydown",this.onKeyDownHandle,this.$name_input),v.b.on("change",this.onChangeLastName,this.$lastname_input),v.b.on("keydown",this.onKeyDownHandle,this.$lastname_input),v.b.on("click",this.onSubmitHandle,this.$button)}disconnectedCallback(){v.b.off("change",this.onChangeName,this.$name_input),v.b.off("keydown",this.onKeyDownHandle,this.$name_input),v.b.off("change",this.onChangeLastName,this.$lastname_input),v.b.off("keydown",this.onKeyDownHandle,this.$lastname_input),v.b.off("click",this.onSubmitHandle,this.$button),v.b.off("click",this.onClickLabelFile,this.$file_label)}onChangeName(t){const{detail:{value:e}}=t;this.name=String(e)}onChangeLastName(t){const{detail:{value:e}}=t;this.lastName=String(e)}onKeyDownHandle(t){13===t.keyCode&&(this.name=String(this.$name_input.$input.value),this.lastName=String(this.$lastname_input.$input.value)||"",this.onSubmitHandle())}onClickLabelFile(){this.$file.$input.click()}onSubmitHandle(){const t=this.$file.blopImage;if(!this.name||this.name.length<1)return this.$name_input.$input.focus(),!1;(({first_name:t,last_name:e,file:n})=>{(async n=>{if("ok"===(await z.send({"@type":"registerUser",first_name:t,last_name:e}))["@type"]&&n){await z.send({"@type":"setProfilePhoto",photo:{"@type":"inputFileBlob",data:n,name:"profilePhoto"}})}})(n).catch(t=>console.error(t))})({first_name:this.name,last_name:this.lastName,file:t})}});const tt=o("auth"),et=document.createElement("template");et.innerHTML=`\n<style>\n  app-chat-country-phone-code, app-input, app-button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n\n  app-chat-country-phone-code{\n    z-index: 2;\n  }\n\n  .hidden {\n    display: none;\n  }\n</style>\n<app-auth-section heading="${tt.sign_in}" desc="${tt.sign_in_desc}" img-src="./public/images/telegram.svg" >\n  <app-chat-country-phone-code type="text" label="${tt.country}"></app-chat-country-phone-code>\n  <app-input data-error-event='phone_invalid' type="text" data-has-mask value='' label="${tt.phone}" ></app-input>\n  <app-checkbox is-checked='false' label-text='${tt.checkbox_label}'></app-checkbox>\n  <app-button class="hidden">${tt.phone_submit}</app-button>\n</app-auth-section>\n`,v.b.define("app-auth",class extends v.a{constructor(){super(),this.makeShadow(et),this.$submitButton=this.shadow.$("app-button"),this.$inputPhone=this.shadow.$("[data-has-mask]"),this.$country=this.shadow.$("app-chat-country-phone-code"),this.$checkbox=this.shadow.$("app-checkbox"),this.telephone="",this.keepAuth=!1,this.selectedData={},this.sendPhoneHandle=this.sendPhoneHandle.bind(this),this.onChangePhoneHandle=this.onChangePhoneHandle.bind(this),this.onKeydownPhoneHandler=this.onKeydownPhoneHandler.bind(this),this.dropdownChange=this.dropdownChange.bind(this),this.onChangeCheckboxHandle=this.onChangeCheckboxHandle.bind(this)}connectedCallback(){v.b.on("click",this.sendPhoneHandle,this.$submitButton),v.b.on("change",this.onChangePhoneHandle,this.$inputPhone),v.b.on("keyup",this.onKeydownPhoneHandler,this.$inputPhone),v.b.on("dropdown.change",this.dropdownChange,this.$country),v.b.on("change",this.onChangeCheckboxHandle,this.$checkbox)}disconnectedCallback(){v.b.off("click",this.sendPhoneHandle,this.$submitButton),v.b.off("change",this.onChangePhoneHandle,this.$inputPhone),v.b.off("keyup",this.onKeydownPhoneHandler,this.$inputPhone),v.b.off("dropdown.change",this.dropdownChange,this.$country),v.b.off("change",this.onChangeCheckboxHandle,this.$checkbox)}dropdownChange({detail:t}){this.$inputPhone.$input.value=`+${t.dialCode}`,this.selectedData=t,this.$inputPhone.keyupHandler({target:this.$inputPhone.$input})}onKeydownPhoneHandler(t){t&&(this.telephone=String(this.$inputPhone.$input.value)),this.telephone.length>=8?this.$submitButton.classList.remove("hidden"):this.$submitButton.classList.add("hidden"),13===t.keyCode&&this.sendPhoneHandle()}onChangePhoneHandle(t){this.telephone=String(t.detail.value)}sendPhoneHandle(){if(!this.telephone)return this.$inputPhone.$input.focus(),!1;M(this.telephone),this.$submitButton.setAttribute("is-loading",null),z.send({"@type":"setAuthenticationPhoneNumber",phone_number:this.telephone}).then(()=>{this.keepAuth&&b("keepMeAuth",this.keepAuth,{expires:219e5})})}onChangeCheckboxHandle(t){const{detail:{value:e}}=t;this.$checkbox.setAttribute("is-checked",e),this.keepAuth=e}});const nt=o("auth"),it=document.createElement("template");it.innerHTML=`\n<style>\n  app-input, button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n</style>\n<app-auth-section heading="${nt.phone}" desc="${nt.code_desc}" isEdit img-src="./public/images/TwoFactorSetupMonkeyIdle.tgs" >\n  <app-input data-error-event='phone_code_invalid' class='confirmation-code' type="text" label="${nt.code}"></app-input>\n</app-auth-section>\n`,v.b.define("app-auth-code-confirm",class extends v.a{constructor(){super(),this.makeShadow(it),this.$input=this.shadow.$(".confirmation-code"),this.$section=this.shadow.$("app-auth-section"),this._code=null,this.onChangeInputHanlde=this.onChangeInputHanlde.bind(this),this.inputFocus=this.inputFocus.bind(this),this.inputFocusOut=this.inputFocusOut.bind(this),this.onKeydownPhoneHandler=this.onKeydownPhoneHandler.bind(this),this.onPasteHandle=this.onPasteHandle.bind(this)}connectedCallback(){const{userInfo:t}=S.getState();this.player=this.$section.player,this.$section.setAttribute("heading",t.temporaryPhone),v.b.on("change",this.onChangeInputHanlde,this.$input),v.b.on("focus",this.onChangeInputHanlde,this.$input),v.b.on("focusin",this.inputFocus,this.$input),v.b.on("focusout",this.inputFocusOut,this.$input),v.b.on("keydown",this.onKeydownPhoneHandler,this.$input),v.b.on("paste",this.onPasteHandle,this.$input)}disconnectedCallback(){v.b.off("change",this.onChangeInputHanlde,this.$input),v.b.off("focus",this.onChangeInputHanlde,this.$input),v.b.off("focusin",this.inputFocus,this.$input),v.b.off("focusout",this.inputFocusOut,this.$input),v.b.off("keydown",this.onKeydownPhoneHandler,this.$input),v.b.off("paste",this.onPasteHandle,this.$input)}onChangeInputHanlde(t){const{detail:{value:e}}=t;this._code=String(e)}onKeydownPhoneHandler(t){13===t.keyCode&&(this._code=String(t.target.$input.value),this.onSubmitHandle())}onPasteHandle(t){var e,n,i;n=this,i=t=>{this._code=t,this.onSubmitHandle()},(e=t).originalEvent&&e.originalEvent.clipboardData?i(e.originalEvent.clipboardData.getData("text")):e.clipboardData?i(e.clipboardData.getData("text/plain")):window.clipboardData?i(window.clipboardData.getData("Text")):setTimeout((function(){i(n.value)}),100)}onSubmitHandle(){if(!this._code||this._code.length<1)return this.$input.$input.focus(),!1;z.send({"@type":"checkAuthenticationCode",code:this._code})}inputFocus(){this.player&&(this.player.load("./public/images/TwoFactorSetupMonkeyTracking.tgs"),this.player.setLooping(!0))}inputFocusOut(t){this.player&&(this.player.load(this.$section.getAttribute("img-src")),this.player.setLooping(!1))}});const at=o("auth"),st=document.createElement("template");st.innerHTML=`\n<style>\n  app-input, app-button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n</style>\n<app-auth-section heading="${at.password_header}" desc="${at.password_desc}" img-src="./public/images/TwoFactorSetupMonkeyClose.tgs">\n  <app-input data-error-event="password_invalid" type="password" label="${at.password}"></app-input>\n  <app-button>${at.phone_submit}</app-button>\n</app-auth-section>\n`,v.b.define("app-auth-password",class extends v.a{constructor(){super(),this.makeShadow(st),this.$submitButton=this.shadow.$("app-button"),this.$input=this.shadow.$("app-input"),this._password=null,this.inputFocus=this.inputFocus.bind(this),this.onChangeHandle=this.onChangeHandle.bind(this),this.onKeyDownHandle=this.onKeyDownHandle.bind(this),this.onSubmitButtonHandle=this.onSubmitButtonHandle.bind(this)}connectedCallback(){this.section=this.shadow.$("app-auth-section"),this.player=this.section.player,this.player&&this.pause(),v.b.on("toggle-password",this.inputFocus,this.$input),v.b.on("change",this.onChangeHandle,this.$input),v.b.on("keydown",this.onKeyDownHandle,this.$input),v.b.on("click",this.onSubmitButtonHandle,this.$submitButton)}disconnectedCallback(){v.b.off("toggle-password",this.inputFocus,this.$input),v.b.off("change",this.onChangeHandle,this.$input),v.b.off("keydown",this.onKeyDownHandle,this.$input),v.b.off("click",this.onSubmitButtonHandle,this.$submitButton)}pause(){setTimeout(()=>{this.player.pause()},1e3)}inputFocus(t){const{isPasswordShow:e}=t.detail;if(e){const t="./public/images/TwoFactorSetupMonkeyPeek.tgs";return this.player&&(this.player.load(t),setTimeout(()=>{this.player.pause()},390)),!1}this.player.play()}onChangeHandle(t){const{detail:{value:e}}=t;this._password=String(e)}onKeyDownHandle(t){13===t.keyCode&&(this._password=String(this.$input.$input.value),this.onSubmitButtonHandle())}onSubmitButtonHandle(){if(!this._password||this._password.length<1)return this.$input.$input.focus(),!1;z.send({"@type":"checkAuthenticationPassword",password:this._password})}});const ot=document.createElement("template");ot.innerHTML="\n<style>\n  app-chat-container{\n    display: flex;\n    max-width: 1680px;\n    min-height: 100vh;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  app-chat-right-sidebar, app-chat-left-sidebar{\n    max-width: 25%;\n    flex-basis: 25%;\n  }\n\n  app-chat-right-sidebar{\n    border-left: 1px solid #dadce0;  \n    border-right: 1px solid #dadce0;  \n  }\n  \n  app-chat-left-sidebar{\n    border-left: 1px solid #dadce0;  \n    border-right: 1px solid #dadce0;  \n  }\n\n  app-chat{\n    max-width: 50%;\n    flex-basis: 50%;\n    background: #e6ebee;\n  }\n</style>\n<app-chat-left-sidebar></app-chat-left-sidebar>\n<app-chat></app-chat>\n<app-chat-right-sidebar></app-chat-right-sidebar>\n",v.b.define("app-chat-container",class extends HTMLElement{constructor(){super(),this.appendChild(ot.content.cloneNode(!0))}});const rt=document.createElement("template");rt.innerHTML="\n<style>\n  :host {\n    display: inline-flex;\n    padding: 10px;\n    border-radius: 10px;\n    word-break: break-word;\n    line-height: 1.3;\n  }\n</style>\n<div></div>\n",v.b.define("app-chat-message",class extends v.a{constructor(){super(),this.makeShadow(rt),this._message=null,this.$wrap=this.shadow.$("div")}connectedCallback(){this.render()}set message(t){this._message=t}getContent(){if(!this._message)return"";const t=this._message.content.text;return t?t.text:"not support yet"}render(){this.$wrap.innerHTML=this.getContent()}});const ht=(t={})=>{pt(),z.send({"@type":"getChatHistory",...t,offset:0,limit:50}).then(e=>{ut(t.chat_id,e)})};let dt=!1;const lt=t=>{const e=t.target;if(!e)return!1;if(e.scrollTop<200){const t=e._shadowRoot.querySelector("app-chat-message");if(!t||dt)return;const n=t._message.chat_id,i=t._message.id;dt=!0,z.send({"@type":"getChatHistory",chat_id:n,from_message_id:i,offset:0,limit:50}).then(t=>{ct(t),dt=!1})}},ct=Object(x.b)(t=>({type:"chat.updateChatHistory",payload:t}),_),pt=Object(x.b)(()=>({type:"chat.getChatHistoryRequest"}),_),ut=Object(x.b)((t,e)=>({type:"chat.setChatHistoryToStore",payload:{chat_id:t,data:e}}),_),bt=document.createElement("template");bt.innerHTML='\n<style>\n  :host {\n    position: relative;\n    max-height: 100vh;\n    overflow-y: auto;\n    color: #161616;\n  }\n\n  app-loader{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .messages {\n    height: 100%;\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: column;\n    margin-left: 5rem;\n    margin-right: 5rem;\n  }\n\n  app-chat-message{\n    background-color: white;\n    max-width: 60%;\n    align-self: flex-start;\n  }\n  \n  .own-message{\n    align-self: flex-end;\n    background-color: #edfadd;\n    border-radius-right-bottom: 0;\n  }\n\n  .has-arrow{\n    position:relative;\n  }\n\n  .has-arrow:before{\n    content: "";\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    border-top: 15px solid transparent;\n    border-bottom: 15px solid white;\n    bottom: 0px;\n  }\n\n  .has-arrow:not(.own-message):before{\n    border-left: 10px solid transparent;\n    left: -5px;\n  }\n\n  .has-arrow.own-message:before{\n    border-right: 10px solid transparent;\n    border-bottom-color: #edfadd;\n    border-top: 15px solid transparent;\n    right: -5px;\n  }\n\n  app-chat-message{\n    margin-bottom: 12px;\n  }\n\n</style>\n<div class="wrap"><app-loader big></app-loader></div>\n',v.b.define("app-chat",class extends v.a{constructor(){super(),this.makeShadow(bt),this.$loader=this.shadow.$("app-loader"),this.$wrap=this.shadow.$("div"),this.setChatHistoryToStoreHandler=this.setChatHistoryToStoreHandler.bind(this),this.getChatHistoryRequestHandler=this.getChatHistoryRequestHandler.bind(this),this.updateChatHistory=this.updateChatHistory.bind(this),this.addEventListener("scroll",lt)}connectedCallback(){v.b.on("chat.getChatHistoryRequest",this.getChatHistoryRequestHandler),v.b.on("chat.setChatHistoryToStore",this.setChatHistoryToStoreHandler),v.b.on("chat.updateChatHistory",this.updateChatHistory),this.checkActiveSession()}disconnectedCallback(){v.b.off("chat.getChatHistoryRequest",this.getChatHistoryRequestHandler),v.b.off("chat.setChatHistoryToStore",this.setChatHistoryToStoreHandler),v.b.off("chat.updateChatHistory",this.updateChatHistory)}updateChatHistory({detail:t}){const e=this.shadow.$(".messages"),n=this.getMessagesNodes(t.action.payload,t.store);e.prepend(n)}getChatHistoryRequestHandler(){this.$loader||(this.$wrap.innerHTML="<app-loader big></app-loader>")}setChatHistoryToStoreHandler({detail:t}){this.$loader&&this.$loader.remove();const e=t.action.payload.data;this.render(e,t.store)}hasArrow(t,e,n){return!n||t.sender_user_id!==n.sender_user_id}getMessagesNodes(t,e){const n=document.createDocumentFragment();return(t.messages||[]).reverse().forEach((i,a)=>{const s=i.sender_user_id===e.options.my_id.value;let o=document.createElement("app-chat-message");o.message=i,this.hasArrow(i,t.messages[a-1],t.messages[a+1])&&o.classList.add("has-arrow"),s&&o.classList.add("own-message"),n.appendChild(o)}),n}checkActiveSession(){z.send({"@type":"getActiveSessions"}).then(t=>{b("activeSession",t.sessions.filter(t=>t.is_current)[0].id,{expires:219e5})})}render(t,e){this.$wrap.innerHTML="";const n=document.createElement("div");n.classList.add("messages");const i=this.getMessagesNodes(t,e);n.appendChild(i),this.$wrap.appendChild(n),this.scroll(0,this.scrollHeight)}});n(13);const mt=document.createElement("template");mt.innerHTML="",v.b.define("app-chat-item-last-message",class extends v.a{constructor(){super(),this.makeShadow(mt),this._data=null}set message(t){this._data=t,this.render()}render(){this.shadow.innerHTML=function(t){if(!t)return"";const{content:e}=t;if(!e)return null;let n="";if(e.caption&&e.caption.text&&(n=`, ${e.caption.text}`),t.ttl>0)return getServiceMessageContent(t);switch(e["@type"]){case"messageAnimation":return"AttachGif"+n;case"messageAudio":return"AttachMusic"+n;case"messageBasicGroupChatCreate":case"messageCall":return"Call"+n;case"messageChatAddMembers":case"messageChatChangePhoto":case"messageChatChangeTitle":case"messageChatDeleteMember":case"messageChatDeletePhoto":case"messageChatJoinByLink":case"messageChatSetTtl":case"messageChatUpgradeFrom":case"messageChatUpgradeTo":case"messageContact":return"AttachContact"+n;case"messageContactRegistered":case"messageCustomServiceAction":case"messageDocument":{const{document:t}=e;return t&&t.file_name?t.file_name+n:"AttachDocument"+n}case"messageExpiredPhoto":return"AttachPhoto"+n;case"messageExpiredVideo":return"AttachVideo"+n;case"messageGame":return"AttachGame"+n;case"messageGameScore":case"messageInvoice":case"messageLocation":return"AttachLocation"+n;case"messagePassportDataReceived":case"messagePassportDataSent":case"messagePaymentSuccessful":case"messagePaymentSuccessfulBot":case"messagePhoto":return"AttachPhoto"+n;case"messagePoll":{const{poll:t}=e;return"\ud83d\udcca "+(t.question||"Poll")+n}case"messagePinMessage":case"messageScreenshotTaken":case"messageSticker":{const{sticker:t}=e;let i="";return t&&t.emoji&&(i=t.emoji),"AttachSticker"+(i?` ${i}`:"")+n}case"messageSupergroupChatCreate":case"messageText":return e.text.text+n;case"messageUnsupported":case"messageVenue":return"AttachLocation"+n;case"messageVideo":return"AttachVideo"+n;case"messageVideoNote":return"AttachRound"+n;case"messageVoiceNote":return"AttachAudio"+n;case"messageWebsiteConnected":default:return"UnsupportedAttachment"}}(this._data)}});const gt=1;var ft=new class{constructor(){this.blobs=new Map,this.urls=new WeakMap,this.downloads=new Map}getBlob(t){return blobs.get(t)}setBlob(t,e){this.blobs.set(t,e)}getBlobUrl(t){if(!t)return null;if(this.urls.has(t))return this.urls.get(t);const e=URL.createObjectURL(t);return this.urls.set(t,e),e}download(t){return!!this.downloads.has(t)||(z.send({"@type":"downloadFile",file_id:t,priority:gt}),this.downloads.set(t,!0),!1)}get(t,e="file.uploadFile"){t&&this.download(t.id)&&(async t=>{const n=await z.send({"@type":"readFile",file_id:t.id});this.setBlob(t.id,n.data);const i=this.getBlobUrl(n.data,t.id);v.b.emmit(e,{file_id:t.id,file_url:i})})(t).catch(t=>t)}};const wt=t=>{ft.get(t)},yt=document.createElement("template");yt.innerHTML='\n<style>\n  :host {\n    position: relative;\n  }\n  * {\n    box-sizing: border-box;\n  }\n  img {\n    max-width: 100%;\n    border-radius: 50%;\n  }\n</style>\n<div class="thumb">\n<img src="./public/images/telegram.svg" alt="thumb"/>\n</div>\n',v.b.define("app-chat-thumb",class extends v.a{constructor(){super(),this.makeShadow(yt),this._file={},this.isFileUpdated=!1,this.$img=this.shadow.$("img"),this.uploadFile=this.uploadFile.bind(this),this.updateFile=this.updateFile.bind(this)}connectedCallback(){wt(this._file),v.b.on("file.uploadFile",this.uploadFile),v.b.on("file.updateFile",this.updateFile)}disconnectedCallback(){v.b.off("file.uploadFile",this.uploadFile),v.b.off("file.updateFile",this.updateFile)}get file_id(){this.getAttribute("file_id")}set file(t){this._file=t}uploadFile({detail:t}){this._file&&this._file.id===t.file_id&&this.updateImage(t.file_url)}updateFile({detail:t}){this._file&&t.file.id===this._file.id&&wt(this._file)}updateImage(t){this.$img.setAttribute("src",t)}});const vt=document.createElement("template");vt.innerHTML='\n<style>\n  :host {\n    position: relative; \n\n    --size: 75px;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  .wrap{\n    display: flex;\n    overflow: hidden;\n    position: relative;\n    box-sizing: border-box;\n    border: none;\n    border-radius: 10px;\n    cursor: pointer;\n    transition:background-color 0.2s ease-out;\n    margin-left: 7px;\n    margin-right: 7px;\n  }\n\n  .wrap:hover, .wrap.active{\n    background-color: #f4f4f5;\n  }\n\n  .ripple{\n    z-index: 1;\n    position: absolute;\n    background-color: #e9e9eb;\n    border-radius: 50%;\n    width: 25px;\n    height: 25px;\n    transition: transform 0.2s ease-out;\n  }\n\n  .ripple.run{\n    transform: scale(30);\n  }\n\n  .thumb, .details{\n    z-index: 2;\n    position: relative;\n  }\n\n  .thumb{\n    flex-basis: var(--size);\n    max-width: var(--size);\n    padding: 10px;\n  }\n\n  img {\n    max-width: 100%;\n    border-radius: 50%;\n  }\n\n  h3 {\n    font-size: 15px;\n    margin-top: 17px;\n    margin-bottom: 7px;\n  }\n\n  .details {\n    flex-basis: calc(100% - var(--size)); \n    max-width: calc(100% - var(--size)); \n  }\n\n  .details span, app-chat-item-last-message{\n    display: inline-block;\n    overflow: hidden;\n    max-width: 100%;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    color: #989b9e;\n  }\n</style>\n<div class="wrap"></div>\n',v.b.define("app-chat-left-list-item",class extends v.a{constructor(){super(),this.makeShadow(vt),this._data,this.$wrap=this.shadow.$(".wrap"),this.onWrapClickHandler=this.onWrapClickHandler.bind(this),this.setChatHistoryToStoreHandler=this.setChatHistoryToStoreHandler.bind(this),this.$wrap.addEventListener("click",this.onWrapClickHandler),v.b.on("chat.setChatHistoryToStore",this.setChatHistoryToStoreHandler)}setChatHistoryToStoreHandler({detail:t}){const{chat_id:e}=t.action.payload;e&&(this.$wrap.classList.contains("active")&&this.$wrap.classList.remove("active"),e===this._data.id&&this.$wrap.classList.add("active"))}connectedCallback(){this.render()}disconnectedCallback(){this.$wrap.removeEventListener("click",this.onWrapClickHandler),v.b.off("chat.setChatHistoryToStore",this.setChatHistoryToStoreHandler)}static get observedAttributes(){return["updateKey"]}attributeChangedCallback(t,e,n){"updateKey"===t&&this.render()}drawRipple(t,e){let n=document.createElement("div");n.classList.add("ripple"),this.$wrap.prepend(n),n.style.top=`${e-n.clientHeight/2}px`,n.style.left=`${t-n.clientWidth/2}px`,n.classList.add("run"),n.addEventListener("transitionend",t=>n.remove())}onWrapClickHandler(t){this.drawRipple(t.offsetX,t.offsetY),ht({chat_id:this._data.id,from_message_id:this._data.last_message.id||0})}get id(){return this.getAttribute("id")}set id(t){this.setAttribute("id",t)}set data(t){this._data=t}setLastMessage(){this.shadow.$("app-chat-item-last-message").message=this._data.last_message}render(){this.$wrap.innerHTML=`\n          <div class="thumb"></div>\n          <div class="details">\n          <h3 class="title">${this._data.title}</h3>\n          <app-chat-item-last-message></app-chat-item-last-message>\n          </div>\n      `,this.setLastMessage();const t=document.createElement("app-chat-thumb");t.file=this._data.photo?this._data.photo.small:null,this.$wrap.querySelector(".thumb").append(t)}});const xt=Object(x.b)(t=>({type:"chatList.setChatIds",payload:{chat_ids:t}}),_),$t=Object(x.b)((t,e)=>({type:"chatList.setChatInfo",payload:{[t]:e}}),_),kt=Object(x.b)(t=>({type:"chatList.setRequestSettings",payload:{params:t}}),_),Ct=t=>{kt(t);const{callback:e,...n}=t;z.send({"@type":"getChats",...n}).then(t=>{xt(t.chat_ids),e&&e(),t.chat_ids&&t.chat_ids.forEach(_t)})},_t=t=>{z.send({"@type":"getChat",chat_id:t}).then(e=>{$t(t,e)})};let Ht=!1;const St=t=>{const e=t.target;if(!e)return!1;const n=e.scrollTop,i=e.clientHeight;if(e.scrollHeight-(n+i)<200){const t=e.lastChild;if(!t||Ht)return;const n=t._data.id,i=t._data.order;Ht=!0,Ct({offset_chat_id:n,offset_order:i,limit:30,callback:()=>{Ht=!1}})}},Lt=document.createElement("template");Lt.innerHTML="\n<style>\n  :host {\n    position: relative;\n    max-height: 100vh;\n  }\n\n  app-loader{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n</style>\n<div><app-loader big></app-loader></div>\n<slot></slot>\n",v.b.define("app-chat-left-sidebar",class extends v.a{constructor(){super(),this.makeShadow(Lt),this.$loader=this.shadow.$("app-loader"),this.setChatInfoHandler=this.setChatInfoHandler.bind(this),this.renderFirstChatDetails=!0}setChatInfoHandler({detail:t}){this.$loader&&this.$loader.remove();const e=Object.values(t.action.payload)[0];this.renderChat(e,e.id),this.renderFirstChatDetails&&(this.renderFirstChatDetails=!1,ht({chat_id:e.id,from_message_id:e.last_message.id||0})),this.addEventListener("scroll",St)}connectedCallback(){v.b.on("chatList.setChatInfo",this.setChatInfoHandler),Ct({offset_chat_id:0,offset_order:"9223372036854775807",limit:30})}disconnectedCallback(){v.b.off("chatList.setChatInfo",this.setChatInfoHandler)}renderChat(t,e){if(document.querySelector(`app-chat-left-list-item[id="${e}"]`))return;const n=document.createElement("app-chat-left-list-item");n.data=t,n.id=e,this.appendChild(n)}}),z.init(),z.sendTdParameters(),z.send({"@type":"checkDatabaseEncryptionKey"});const At=document.createElement("template");At.innerHTML='\n<style>\n  app-auth-section app-input, app-auth-section button{\n    width: 100%;\n    margin-bottom: 25px;\n  }\n</style>\n<main id="app" class="main-container">Main page</main>\n',v.b.define("main-app",class extends v.a{constructor(){super(),this.appendChild(At.content.cloneNode(!0)),this.$app=document.getElementById("app"),this.router=new w(this.$app,f,S)}connectedCallback(){this.router.init(),this.logOut()}logOut(){u("activeSession")&&!u("keepMeAuth")&&z.send({"@type":"logOut"}).then(()=>{m("activeSession")})}});n(14)}]);